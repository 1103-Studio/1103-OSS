# 生产环境建议

本文档是对仓库内 `PRODUCTION_DEPLOYMENT.md` 的精简版，便于快速查阅。

## HTTPS 与反向代理

强烈建议在公网访问时使用 HTTPS，并通过 Nginx/Caddy/Traefik 等反向代理：

- 对外仅开放 `80/443`
- 内网转发到 API（例如 `9000`）与 Web（例如 `9002`）

## 防火墙

- 允许：`22`（SSH）、`80/443`（HTTP/HTTPS）
- 不建议对公网暴露：数据库端口（`5432`）、Redis（`6379`）、内部管理端口等

## 配置与密钥管理

- **生产环境务必修改默认管理员密码**
- 不要在仓库中提交真实的 `.env`、AccessKey/SecretKey
- 推荐将敏感配置放到服务器侧的安全位置（或使用密钥管理服务）

## 备份与恢复

建议至少具备：

- PostgreSQL 定期备份（逻辑备份/物理备份都可）
- 对象数据目录/卷备份（建议增量备份 + 周期快照）
- 演练恢复流程（确保备份可用）

## 监控与日志

- 为容器设置日志轮转（`json-file` 的 `max-size/max-file`）
- 可选：Prometheus + Grafana 监控
- 部署健康检查脚本，对 `/health` 做探测并告警

如需完整示例与更细节的 Nginx 配置、备份脚本、监控方案，请参考仓库根目录的 `PRODUCTION_DEPLOYMENT.md`。
